<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Raw Previewer</title>
  <script>
var param = location.search.substring(1);

var FileRaw = param.replace(/\/\/github\.com/, '//raw.githubusercontent.com').replace(/\/blob\//, '/');

var defaultRaw = "https://github.com/dirkncl/myfirst-gh-page/blob/gh-pages/index.html".replace(/\/\/github\.com/, '//raw.githubusercontent.com').replace(/\/blob\//, '/');

var fileRaw = FileRaw||defaultRaw;

var fileName = fileRaw.split('/').pop();

var basePath = fileRaw.replace(fileName,'');

window.onload = function(){
  var rawFile = new XMLHttpRequest();
  rawFile.overrideMimeType('text/plain; charset=utf-8');
  rawFile.open("GET", fileRaw, true);
  rawFile.onload = function () {
    if(rawFile.readyState === 4) {
      if(rawFile.status === 200 || rawFile.status == 0) {
        var rawHTML = rawFile.responseText;
        rawHTML = rawHTML.replace(/<head>/i, '<head><base href="' + basePath + '">')
        var ifr = document.createElement('iframe');
        ifr.width = window.innerWidth; 
        ifr.height = window.innerHeight;
        ifr.border = '0px';
        ifr.srcdoc = rawHTML;
         document.body.appendChild(ifr);
       
      }
    }
  }
  rawFile.send(null);
}
  </script>
</head>
<body>

</body>
</html>
